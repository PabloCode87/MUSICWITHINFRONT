<div class="container mt-5 cancion">
  <div class="card shadow-sm p-3 mb-5 bg-black rounded">
    <div class="card-body">
      <h1 class="card-title">{{ cancion?.song_name }}</h1>
      <p class="card-text"><strong>Artista:</strong> {{ cancion?.artist }}</p>
      <p class="card-text"><strong>Género:</strong> {{ cancion?.genre }}</p>
      <p class="card-text"><strong>Duración:</strong> {{ cancion?.duration }}</p>

      <div *ngIf="audioUrl" class="audio-player mt-4">
        <audio controls [src]="audioUrl" class="w-100"></audio>
      </div>
    </div>
    <div class="card-footer">
      <button type="button" class="btn btn-primary" (click)="openPlaylistModal()"><i class="bi bi-plus-circle-fill"> Agregar</i></button>
      <button *ngIf="currentUserID === uploadedByID" type="button" class="btn btn-warning" (click)="modificarCancion()"><i class="bi bi-pencil-square"> Modificar</i></button>
      <button *ngIf="currentUserID === uploadedByID" type="button" class="btn btn-danger" (click)="eliminarCancion()"><i class="bi bi-trash"> Borrar</i></button>
      <button type="button" class="btn btn-info" (click)="compartirCancion()"><i class="bi bi-share-fill"> Compartir</i></button>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="playlistModal" tabindex="-1" aria-labelledby="playlistModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="playlistModalLabel">Agregar a Playlist</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <button type="button" class="btn btn-success mb-3" (click)="redirigirACrearPlaylist()"><i class="bi bi-collection-play-fill"> Crear Playlist</i></button>
        <ul class="list-group">
          <li *ngFor="let playlist of playlists" class="list-group-item d-flex justify-content-between align-items-center">
            {{ playlist.playlist_name }}
            <button class="btn btn-sm btn-primary" (click)="addToPlaylist(playlist.playlistID)"><i class="bi bi-plus-circle-fill"> Agregar</i></button>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>